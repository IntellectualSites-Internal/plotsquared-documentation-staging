<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Plot analysis</title>
<style>
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";

body {
    font-family: inherit;
}

h1 {
    font-weight: normal;
}

h2, h3, #toctitle, a:hover, a:focus {
    color: #2397f7;
}

h2 {
    font-size: 2.1em;
    font-weight: normal;
}

h3 {
    font-size: 1.4em;
}

p {
    line-height: 1.2;
}

a {
    color: #717171;
}

code {
    color: #002340;
    font-size: 0.8em !important;
}

#toc a {
    color: #555;
}

#toc a:hover {
    font-weight: 600;
    color: #424242;
}

/* dark-mode for sidebar*/

/*
#toc.toc2 {
    background: #131313;
}

#toc a {
    color: #a8a8a8;
}

#toc a:hover {
    font-weight: 600;
    color: #fff;
}
*/

.sect1 + .sect1 {
    border-top: 1px dotted #999;
}

#_return_to_the_index a {
    text-decoration: unset;
}

.literalblock pre, .listingblock > .content > pre {
  font-size: 0.9em;
}

.ulist > .title {
    color: #000;
    font-style: inherit;
    font-family: inherit;
    font-weight: 800;
}

/* Icons: */
.admonitionblock td.icon [class*=' icon-']::before {
    text-shadow: 0 0 0;
    color: #b0b0b0;
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Plot analysis</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_why_is_this_better_than_the_previous_blocks_modified">2. Why is this better than the previous blocks modified?</a></li>
<li><a href="#_how_do_i_manually_calibrate_plot_analysis">3. How do I manually calibrate plot analysis?</a></li>
<li><a href="#_how_do_i_auto_calibrate_plot_analysis">4. How do I auto calibrate plot analysis?</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<h5 id="_return_to_the_index" class="discrete"><a href="README.html">Â« Return to the index</a></h5>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Plot analysis is used to better determine the quality of plots specifically for plot clearing. It can be configured manually, or calibrated based on existing plot ratings.</p>
</div>
<div class="paragraph">
<p>It is part of the plot expiry system, and is optional check on top of clearing plots older than a set number of days.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_better_than_the_previous_blocks_modified">2. Why is this better than the previous blocks modified?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The number of changed blocks is not an accurate way to gauge the quality of the plot. Players could spam blocks, or in the case of worldedit, set the plot to a blob of stone. Using plot analysis, it correlates 10 different metrics to plot quality and hopefully be a better determination of quality builds without having to manually look at each one.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_do_i_manually_calibrate_plot_analysis">3. How do I manually calibrate plot analysis?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Please note that there is also auto calibration (see below)</em></p>
</div>
<div class="paragraph">
<p>In the <code>settings.yml</code> there is a section for auto clearing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="YAML"><span class="key">clear</span>:
  <span class="key">auto</span>:
    <span class="comment"># If auto clearing is enabled</span>
    <span class="key">enabled</span>: <span class="string"><span class="content">true</span></span>

    <span class="comment"># If the threshold is set to -1, all plots will be cleared</span>
    <span class="comment"># Otherwise, any expired plot less than this threshold will be cleared</span>
    <span class="key">threshold</span>: <span class="string"><span class="content">-1</span></span>

    <span class="comment"># This section can be auto calibrated, or done yourself</span>
    <span class="key">calibration</span>:
      <span class="key">changes_sd</span>: <span class="string"><span class="content">64</span></span> <span class="comment"># The Standard Deviation of the changes per column</span>
      <span class="key">variety_sd</span>: <span class="string"><span class="content">1</span></span>  <span class="comment"># The Standard Deviation of the variety of Materials per column</span>
      <span class="key">faces_sd</span>: <span class="string"><span class="content">32</span></span>   <span class="comment"># The Standard Deviation of the number of block faces showing per column</span>
      <span class="key">air</span>: <span class="string"><span class="content">0</span></span>         <span class="comment"># The mean of the amount of air per column</span>
      <span class="key">faces</span>: <span class="string"><span class="content">2</span></span>       <span class="comment"># The mean of the number of block faces showing per column</span>
      <span class="key">changes</span>: <span class="string"><span class="content">1</span></span>     <span class="comment"># The mean of the changes per column</span>
      <span class="key">data_sd</span>: <span class="string"><span class="content">1</span></span>     <span class="comment"># The Standard Deviation of the variety of the &quot;BlockData&quot; per column</span>
      <span class="key">variety</span>: <span class="string"><span class="content">1</span></span>     <span class="comment"># The mean of the variety of Materials per column</span>
      <span class="key">air_sd</span>: <span class="string"><span class="content">0</span></span>      <span class="comment"># The Standard Deviation of the variety of the amount of air per column</span>
      <span class="key">data</span>: <span class="string"><span class="content">32</span></span>       <span class="comment"># The mean of the variety of &quot;BlockData&quot; per column</span>

    <span class="comment"># The interval at which plots are cleared (lower is faster)</span>
    <span class="key">clear-interval-seconds</span>: <span class="string"><span class="content">10</span></span>

    <span class="comment"># Any plot older than this will be checked and possibly cleared</span>
    <span class="key">days</span>: <span class="string"><span class="content">7</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you only want to clear plots based on the number of changes, set all the metrics to 0 except "changes". Then set the complexity accordingly. The changes metrics is 100 * average per column.</p>
</div>
<div class="paragraph">
<p><strong>What is a column?</strong>
A column is the entire vertical space for a block. e.g. If you are standing on a block, the column is that block and everything directly above and below it. Each column can contain at most 256 blocks (as it&#8217;s 256 blocks tall).</p>
</div>
<div class="paragraph">
<p>If you want for instance to clear any plot that had less than 7 blocks changed per column, you would do the following <code>(note that 7 -&gt; 700 for the threshold and is the same for each calibration parameter)</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="YAML"><span class="key">clear</span>:
  <span class="key">auto</span>:
    <span class="comment"># Please note how the threshold is set to 100 * 7 or 700</span>
    <span class="key">threshold</span>: <span class="string"><span class="content">700</span></span>

    <span class="comment"># This section has be calibrated to only care about blocks changed</span>
    <span class="key">calibration</span>:
      <span class="key">changes_sd</span>: <span class="string"><span class="content">0</span></span>
      <span class="key">variety_sd</span>: <span class="string"><span class="content">0</span></span>
      <span class="key">faces_sd</span>: <span class="string"><span class="content">0</span></span>
      <span class="key">air</span>: <span class="string"><span class="content">0</span></span>
      <span class="key">faces</span>: <span class="string"><span class="content">0</span></span>
      <span class="key">changes</span>: <span class="string"><span class="content">1</span></span>
      <span class="key">data_sd</span>: <span class="string"><span class="content">0</span></span>
      <span class="key">variety</span>: <span class="string"><span class="content">0</span></span>
      <span class="key">air_sd</span>: <span class="string"><span class="content">0</span></span>
      <span class="key">data</span>: <span class="string"><span class="content">0</span></span>

    <span class="comment"># Set these to whatever you want</span>
    <span class="key">enabled</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">clear-interval-seconds</span>: <span class="string"><span class="content">10</span></span>
    <span class="key">days</span>: <span class="string"><span class="content">7</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_do_i_auto_calibrate_plot_analysis">4. How do I auto calibrate plot analysis?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Plot analysis can be auto calibrated based on plot ratings. The more ratings you have, the more accurate the calibration will be.</p>
</div>
<div class="paragraph">
<p><strong>To rate plots use:</strong> <br>
<code>/plot rate next</code> - To teleport to the next ratable plot (this is skewed so that low quality plots receive less ratings) <br>
<code>/plot rate &lt;value&gt;</code> - To rate the plots</p>
</div>
<div class="paragraph">
<p>The best way to get good data is to just encourage players on the server to rate as many plots as they can - you can always recalibrate.</p>
</div>
<div class="paragraph">
<p><strong>To calibrate use:</strong> <br>
<code>/plot debugexec calibrate-analysis &lt;percentage&gt;</code> <br>
The percentage is what (rough) percent of old plots you would like to have cleared. If you just want to get rid of some really low quality plots e.g. 7% of plots use:  <br>
<code>/plot debugexec calibrate-analysis 7</code></p>
</div>
<div class="paragraph">
<p>To view the current complexity of the plot you are in use <code>/plot debugexec analyze</code> - then the same command to view the analysis.</p>
</div>
<div class="paragraph">
<p><strong>To recalibrate:</strong> <br>
It is best to clear the current analysis so plots can be re-analyzed: <br>
(optional) <code>/plot debugexec remove-flag analysis</code> <br>
(required) <code>/plot debugexec calibrate-analysis &lt;percentage&gt;</code></p>
</div>
</div>
</div>
</div>
</body>
</html>